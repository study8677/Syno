{% extends "base.html" %}
{% block title %}管理 · Syno{% endblock %}
{% block content %}
<section class="col-span-12 md:col-span-10 md:col-start-2 space-y-6">
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-semibold">管理后台</h1>
    <div class="text-sm text-gray-500">仅管理员可见（SYNO_ADMIN_USERS）</div>
  </div>

  <div class="rounded-xl border border-gray-200 bg-white p-4">
    <div class="flex items-center gap-2 text-sm">
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='users' else 'border border-gray-300' }}" href="/admin?tab=users">用户</a>
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='questions' else 'border border-gray-300' }}" href="/admin?tab=questions">问题</a>
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='answers' else 'border border-gray-300' }}" href="/admin?tab=answers">答案</a>
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='comments' else 'border border-gray-300' }}" href="/admin?tab=comments">评论</a>
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='personas' else 'border border-gray-300' }}" href="/admin?tab=personas">我的人格</a>
      <a class="px-3 py-1.5 rounded-full {{ 'bg-brand text-white' if tab=='hub' else 'border border-gray-300' }}" href="/admin?tab=hub">人格广场</a>
    </div>
    <form method="get" class="mt-3 flex items-center gap-2">
      <input type="hidden" name="tab" value="{{ tab }}"/>
      <input name="q" value="{{ q or '' }}" class="w-72 rounded-full border border-gray-200 bg-gray-100 px-3 py-2 text-sm" placeholder="搜索（用户名/标题/内容片段）" />
      <button class="px-3 py-2 rounded-full border border-gray-300 bg-white hover:bg-gray-50 text-sm" type="submit">筛选</button>
    </form>
  </div>

  <div class="rounded-xl border border-gray-200 bg-white p-0 overflow-hidden">
    <table class="w-full text-sm">
      <thead class="bg-gray-50 text-gray-600">
        <tr>
          {% for h in headers %}<th class="text-left px-4 py-2">{{ h }}</th>{% endfor %}
          <th class="text-right px-4 py-2">操作</th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr class="border-t">
            {% for cell in row.cells %}<td class="px-4 py-2 align-top">{{ cell }}</td>{% endfor %}
            <td class="px-4 py-2 text-right">
              {% if row.delete_action %}
              <form method="post" action="{{ row.delete_action }}" onsubmit="return confirm('确定删除？不可恢复。')">
                <button class="px-3 py-1.5 rounded-full border border-red-300 text-red-700 hover:bg-red-50" type="submit">删除</button>
              </form>
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr><td class="px-4 py-6 text-gray-500" colspan="9">暂无数据</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
